# SonarQube/SonarCloud Configuration
# Project identification
sonar.organization=amilcard
sonar.projectKey=Amilcard_flooow-connect-8938a98d
sonar.projectName=Flooow Connect

# Source configuration
# Note: supabase/functions excluded - edge functions have different complexity requirements
sonar.sources=src
sonar.tests=tests

# ===========================================
# EXCLUSIONS - Files to ignore in analysis
# ===========================================

# SQL Migrations - These are immutable database history files
# They should NOT be modified after being applied to production
# Duplicated literals in migrations are acceptable as each migration is standalone
# Scripts - One-off audit and utility scripts, not production code
# Root SQL files - One-off fix scripts, not production code
sonar.exclusions=\
  *.sql,\
  supabase/migrations/**/*.sql,\
  supabase/functions/**/*,\
  scripts/**/*,\
  **/node_modules/**,\
  **/dist/**,\
  **/*.min.js,\
  **/coverage/**,\
  **/*.spec.ts,\
  **/*.test.ts,\
  **/test_*.ts,\
  **/*.examples.ts,\
  **/README*.md,\
  src/pages/Index.tsx,\
  src/lib/api-adapters.ts

# Duplication exclusions (same files)
sonar.cpd.exclusions=\
  supabase/migrations/**/*.sql,\
  scripts/**/*,\
  **/*.spec.ts,\
  **/*.test.ts

# Test file patterns
sonar.test.inclusions=\
  tests/**/*,\
  **/*.spec.ts,\
  **/*.test.ts

# TypeScript/JavaScript configuration
sonar.typescript.lcov.reportPaths=coverage/lcov.info
sonar.javascript.lcov.reportPaths=coverage/lcov.info

# Cognitive complexity threshold (default is 15)
# sonar.typescript.cognitive.complexity.threshold=15

# ===========================================
# QUALITY GATE CONFIGURATION
# ===========================================
# This project uses custom Quality Gate "Flooow - No Coverage"
# Coverage metrics are disabled as the project is in early development
# Focus is on: Reliability (bugs), Security (vulnerabilities), Maintainability (code smells)

# ===========================================
# ISSUE EXCLUSIONS - Skip minor style rules
# ===========================================
# Solo developer project: minor style issues should not block merges
# Focus on bugs and security, not style preferences

# Skip cognitive complexity warnings on privacy/analytics components
# These files have intentional patterns for RGPD compliance
sonar.issue.ignore.multicriteria=e1,e2

# Rule: Cognitive complexity (intentional in hooks)
sonar.issue.ignore.multicriteria.e1.ruleKey=typescript:S3776
sonar.issue.ignore.multicriteria.e1.resourceKey=src/hooks/**/*

# Rule: JSX depth / nested callbacks (React patterns)
sonar.issue.ignore.multicriteria.e2.ruleKey=typescript:S1541
sonar.issue.ignore.multicriteria.e2.resourceKey=src/components/**/*
